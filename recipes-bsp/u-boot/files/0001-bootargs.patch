From 08a471d3a13926e4266816941d50cd221ebf6c3f Mon Sep 17 00:00:00 2001
From: Ferocity <christian.fries123@gmail.com>
Date: Tue, 17 Nov 2015 15:28:38 +0100
Subject: [PATCH] bootargs

---
 include/configs/rpi-common.h | 30 +++++++++++++++++++++++++++++-
 1 file changed, 29 insertions(+), 1 deletion(-)

diff --git a/include/configs/rpi-common.h b/include/configs/rpi-common.h
index 0b8c681..448b67e 100644
--- a/include/configs/rpi-common.h
+++ b/include/configs/rpi-common.h
@@ -179,7 +179,35 @@
 #define CONFIG_EXTRA_ENV_SETTINGS \
 	ENV_DEVICE_SETTINGS \
 	ENV_MEM_LAYOUT_SETTINGS \
-	BOOTENV
+	"script=boot.scr\0" \
+	"zimage=zImage\0" \
+	"fdt_file=zImage.dtb\0" \
+	"mmcdev=0\0" \
+	"mmcpart=1\0" \
+	"mmcroot=/dev/mmcblk0p2 rw\0" \
+	"mmcrootfstype=ext4 rootwait noinitrd\0" \
+	"mmcargs=setenv bootargs earlyprintk console=tty0 console=ttyAMA0" \
+			"root=${mmcroot}" \
+		   "rootfstype=${mmcrootfstype}\0" \
+	"loadbootscript=" \
+		"fatload mmc ${mmcdev}:${mmcpart} ${loadaddr} ${script};\0" \
+	"bootscript=echo Running bootscript from mmc ...; " \
+		"source\0" \
+	"loadzimage=fatload mmc ${mmcdev}:${mmcpart} ${kernel_addr_r} ${zimage}\0" \
+	"loadfdt=fatload mmc 0:1 ${fdt_addr_r} ${fdt_file}\0" \
+	"mmcboot=echo Booting from mmc ...; " \
+				"run mmcargs; " \
+				"bootz ${kernel_addr_r} - ${fdt_addr_r}\0" \
+	"netargs=setenv bootargs earlyprintk console=tty1 console=ttyAMA0" \
+			"root=/dev/nfs" \
+		   "rw nfsroot=${serverip}:${nfsroot}\0" \
+	"netboot=echo Booting from net ...; " \
+		"usb start; "\
+		"run netargs; " \
+		"tftp ${kernel_addr_r} ${zimage};" \
+		"tftp ${fdt_addr_r} ${fdt_file};" \
+		"bootz ${kernel_addr_r} - ${fdt_addr_r}\0" \
+	"bootcmd=run loadzimage; run loadfdt; run mmcboot;\0"
 
 #define CONFIG_BOOTDELAY 2
 
-- 
1.9.1

